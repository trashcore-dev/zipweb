<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat Room</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .chat-container {
            width: 100%;
            max-width: 1000px;
            height: 90vh;
            background: white;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 15px 50px rgba(0, 0, 0, 0.3);
            display: flex;
            flex-direction: column;
        }
        
        .chat-header {
            background: linear-gradient(to right, #4776E6, #8E54E9);
            color: white;
            padding: 20px;
            text-align: center;
            position: relative;
        }
        
        .chat-header h1 {
            font-size: 1.8rem;
            font-weight: 600;
        }
        
        .chat-header p {
            opacity: 0.9;
            margin-top: 5px;
            font-size: 0.9rem;
        }
        
        .chat-body {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            background: #f5f7fb;
        }
        
        .message {
            max-width: 70%;
            padding: 12px 18px;
            margin-bottom: 15px;
            border-radius: 18px;
            position: relative;
            animation: fadeIn 0.3s ease-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .received {
            align-self: flex-start;
            background: white;
            border-bottom-left-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .sent {
            align-self: flex-end;
            background: linear-gradient(to right, #4776E6, #8E54E9);
            color: white;
            border-bottom-right-radius: 5px;
        }
        
        .message-info {
            display: flex;
            justify-content: space-between;
            margin-top: 5px;
            font-size: 0.75rem;
        }
        
        .received .message-info {
            color: #777;
        }
        
        .sent .message-info {
            color: rgba(255, 255, 255, 0.8);
        }
        
        .message-time {
            opacity: 0.7;
        }
        
        .chat-footer {
            padding: 15px 20px;
            background: white;
            display: flex;
            gap: 10px;
            border-top: 1px solid #eee;
        }
        
        .message-input {
            flex: 1;
            padding: 12px 20px;
            border: 2px solid #e0e0e0;
            border-radius: 30px;
            font-size: 1rem;
            outline: none;
            transition: border-color 0.3s;
        }
        
        .message-input:focus {
            border-color: #4776E6;
        }
        
        .send-button {
            background: linear-gradient(to right, #4776E6, #8E54E9);
            color: white;
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        
        .send-button:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(71, 118, 230, 0.4);
        }
        
        .send-button i {
            font-size: 1.2rem;
        }
        
        .user-input {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .username-input {
            flex: 1;
            padding: 12px 20px;
            border: 2px solid #e0e0e0;
            border-radius: 30px;
            font-size: 1rem;
            outline: none;
        }
        
        .join-button {
            background: #28a745;
            color: white;
            border: none;
            padding: 0 25px;
            border-radius: 30px;
            cursor: pointer;
            font-weight: 600;
            transition: background 0.3s;
        }
        
        .join-button:hover {
            background: #218838;
        }
        
        .typing-indicator {
            display: none;
            align-self: flex-start;
            background: white;
            padding: 12px 18px;
            border-radius: 18px;
            border-bottom-left-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            margin-bottom: 15px;
        }
        
        .typing-indicator span {
            height: 8px;
            width: 8px;
            float: left;
            margin: 0 2px;
            background-color: #9E9EA1;
            display: block;
            border-radius: 50%;
            opacity: 0.4;
        }
        
        .typing-indicator span:nth-of-type(1) {
            animation: typing 1s infinite;
        }
        
        .typing-indicator span:nth-of-type(2) {
            animation: typing 1s infinite 0.2s;
        }
        
        .typing-indicator span:nth-of-type(3) {
            animation: typing 1s infinite 0.4s;
        }
        
        @keyframes typing {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }
        
        @media (max-width: 768px) {
            .chat-container {
                height: 95vh;
            }
            
            .message {
                max-width: 85%;
            }
        }
    </style>
</head>
<body>
    <div class="chat-container">
        <div class="chat-header">
            <h1><i class="fas fa-comments"></i> Global Chat Room</h1>
            <p>Connect with people around the world in real-time</p>
        </div>
        
        <div class="chat-body" id="chatBody">
            <div class="message received">
                <div class="message-text">Welcome to the chat room! Type your message below to start chatting.</div>
                <div class="message-info">
                    <span class="sender">System</span>
                    <span class="message-time">10:00 AM</span>
                </div>
            </div>
            
            <div class="typing-indicator" id="typingIndicator">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
        
        <div class="chat-footer">
            <div class="user-input" id="userInputSection">
                <input type="text" class="username-input" id="usernameInput" placeholder="Enter your name">
                <button class="join-button" id="joinButton">Join Chat</button>
            </div>
            
            <div class="message-input-section" id="messageInputSection" style="display: none;">
                <input type="text" class="message-input" id="messageInput" placeholder="Type your message here..." disabled>
                <button class="send-button" id="sendButton" disabled>
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
        </div>
    </div>

    <script>
        // DOM Elements
        const chatBody = document.getElementById('chatBody');
        const usernameInput = document.getElementById('usernameInput');
        const joinButton = document.getElementById('joinButton');
        const messageInput = document.getElementById('messageInput');
        const sendButton = document.getElementById('sendButton');
        const userInputSection = document.getElementById('userInputSection');
        const messageInputSection = document.getElementById('messageInputSection');
        const typingIndicator = document.getElementById('typingIndicator');
        
        // State variables
        let currentUser = null;
        let messages = [];
        
        // Initialize with sample messages
        function initializeChat() {
            addMessage("Welcome to our chat room! This is a demo of real-time messaging.", "System", false);
            addMessage("Feel free to send messages and see how they appear instantly!", "System", false);
        }
        
        // Add a new message to the chat
        function addMessage(text, sender, isSent = false) {
            const messageDiv = document.createElement('div');
            messageDiv.classList.add('message');
            messageDiv.classList.add(isSent ? 'sent' : 'received');
            
            const time = new Date();
            const timeString = time.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
            
            messageDiv.innerHTML = `
                <div class="message-text">${text}</div>
                <div class="message-info">
                    <span class="sender">${sender}</span>
                    <span class="message-time">${timeString}</span>
                </div>
            `;
            
            chatBody.insertBefore(messageDiv, typingIndicator);
            chatBody.scrollTop = chatBody.scrollHeight;
            
            // Store message
            messages.push({
                text,
                sender,
                time: timeString,
                isSent
            });
        }
        
        // Show typing indicator
        function showTyping() {
            typingIndicator.style.display = 'block';
            chatBody.scrollTop = chatBody.scrollHeight;
        }
        
        // Hide typing indicator
        function hideTyping() {
            typingIndicator.style.display = 'none';
        }
        
        // Simulate receiving a message after a delay
        function simulateReceivedMessage() {
            const responses = [
                "That's interesting!",
                "Thanks for sharing!",
                "I agree with you.",
                "How are you doing today?",
                "Have you tried the new feature?",
                "Looking forward to your next message!",
                "Great point!",
                "I hadn't thought of it that way.",
                "What do you think about this topic?",
                "Nice to meet you here!"
            ];
            
            const randomResponse = responses[Math.floor(Math.random() * responses.length)];
            const senders = ["Alex", "Taylor", "Jordan", "Casey", "Morgan", "Riley"];
            const randomSender = senders[Math.floor(Math.random() * senders.length)];
            
            setTimeout(() => {
                addMessage(randomResponse, randomSender, false);
                hideTyping();
            }, 2000 + Math.random() * 3000);
        }
        
        // Handle joining the chat
        joinButton.addEventListener('click', () => {
            const username = usernameInput.value.trim();
            if (username) {
                currentUser = username;
                userInputSection.style.display = 'none';
                messageInputSection.style.display = 'flex';
                messageInput.disabled = false;
                sendButton.disabled = false;
                messageInput.focus();
                
                addMessage(`Hello ${username}! You've joined the chat.`, "System", false);
            } else {
                usernameInput.placeholder = "Please enter your name!";
                usernameInput.style.borderColor = "#dc3545";
                setTimeout(() => {
                    usernameInput.style.borderColor = "#e0e0e0";
                    usernameInput.placeholder = "Enter your name";
                }, 2000);
            }
        });
        
        // Handle sending a message
        sendButton.addEventListener('click', sendMessage);
        messageInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });
        
        function sendMessage() {
            const message = messageInput.value.trim();
            if (message && currentUser) {
                addMessage(message, currentUser, true);
                messageInput.value = '';
                
                // Show typing indicator and simulate response
                showTyping();
                simulateReceivedMessage();
            }
        }
        
        // Initialize the chat
        initializeChat();
    </script>
</body>
</html>
